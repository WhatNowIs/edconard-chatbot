(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{93414:function(){},70172:function(){},2001:function(){},33779:function(){},82258:function(){},61563:function(e,s,t){"use strict";t.d(s,{default:function(){return eT}});var n,a,r,l,i=t(57437),o=t(24266),d=t(2265),c=t(71538),u=t(12218),h=t(44839),m=t(96164);function x(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,m.m6)((0,h.W)(s))}let p=(0,u.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=d.forwardRef((e,s)=>{let{className:t,variant:n,size:a,asChild:r=!1,...l}=e,o=r?c.g7:"button";return(0,i.jsx)(o,{className:x(p({variant:n,size:a,className:t})),ref:s,...l})});f.displayName="Button";var j=t(74109),g=t(42365);function v(e){var s;let{config:t,onFileUpload:n,onFileError:a}=e,[r,l]=(0,d.useState)(!1),o=(null==t?void 0:t.inputId)||"fileInput",c=(null==t?void 0:t.fileSizeLimit)||52428800,u=null==t?void 0:t.allowedExtensions,h=null!==(s=null==t?void 0:t.checkExtension)&&void 0!==s?s:e=>u&&!u.includes(e)?"Invalid file type. Please select a file with one of these formats: ".concat(u.join(",")):null,m=e=>e.size>c,f=()=>{document.getElementById(o).value=""},v=async e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&(l(!0),await w(t),f(),l(!1))},w=async e=>{let s=a||window.alert,t=h(e.name.split(".").pop()||"");return t?s(t):m(e)?s("File size exceeded. Limit is ".concat(c/1024/1024," MB")):void await n(e)};return(0,i.jsxs)("div",{className:"self-stretch",children:[(0,i.jsx)("input",{type:"file",id:o,style:{display:"none"},onChange:v,accept:null==u?void 0:u.join(","),disabled:(null==t?void 0:t.disabled)||r}),(0,i.jsx)("label",{htmlFor:o,className:x(p({variant:"secondary",size:"icon"}),"cursor-pointer",r&&"opacity-50"),children:r?(0,i.jsx)(j.Z,{className:"h-4 w-4 animate-spin"}):(0,i.jsx)(g.Z,{className:"-rotate-45 w-4 h-4"})})]})}let w=d.forwardRef((e,s)=>{let{className:t,type:n,...a}=e;return(0,i.jsx)("input",{type:n,className:x("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...a})});w.displayName="Input";var N=t(59738),b=t(66648);function y(e){let{url:s,onRemove:t}=e;return(0,i.jsxs)("div",{className:"relative w-20 h-20 group",children:[(0,i.jsx)(b.default,{src:s,alt:"Uploaded image",fill:!0,className:"object-cover w-full h-full rounded-xl hover:brightness-75"}),(0,i.jsx)("div",{className:x("absolute -top-2 -right-2 w-6 h-6 z-10 bg-gray-500 text-white rounded-full hidden group-hover:block"),children:(0,i.jsx)(N.Z,{className:"w-6 h-6 bg-gray-500 text-white rounded-full",onClick:t})})]})}function C(e){let[s,t]=(0,d.useState)(null),n=async e=>{t(await new Promise((s,t)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>s(n.result),n.onerror=e=>t(e)}))},a=async s=>{var t,a;try{if(e.multiModal&&s.type.startsWith("image/"))return await n(s);null===(t=e.onFileUpload)||void 0===t||t.call(e,s)}catch(s){null===(a=e.onFileError)||void 0===a||a.call(e,s.message)}};return(0,i.jsxs)("form",{onSubmit:n=>{if(s){e.handleSubmit(n,{data:{imageUrl:s}}),t(null);return}e.handleSubmit(n)},className:"rounded-xl bg-white p-4 shadow-xl space-y-4",children:[s&&(0,i.jsx)(y,{url:s,onRemove:()=>t(null)}),(0,i.jsxs)("div",{className:"flex w-full items-start justify-between gap-4 ",children:[(0,i.jsx)(w,{autoFocus:!0,name:"message",placeholder:"Type a message",className:"flex-1",value:e.input,onChange:e.handleInputChange}),(0,i.jsx)(v,{onFileUpload:a,onFileError:e.onFileError}),(0,i.jsx)(f,{type:"submit",disabled:e.isLoading,children:"Send message"})]})]})}var D=t(70459),k=t(66706);function S(e){return(0,i.jsxs)("div",{className:"space-x-4",children:[e.showStop&&(0,i.jsxs)(f,{variant:"outline",size:"sm",onClick:e.stop,children:[(0,i.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),"Stop generating"]}),e.showReload&&(0,i.jsxs)(f,{variant:"outline",size:"sm",onClick:e.reload,children:[(0,i.jsx)(k.Z,{className:"mr-2 h-4 w-4"}),"Regenerate"]})]})}var R=t(22468),F=t(6884),z=t(71145),L=t(40475);function E(e){let{role:s}=e;return"user"===s?(0,i.jsx)("div",{className:"flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border bg-background shadow",children:(0,i.jsx)(z.Z,{className:"h-4 w-4"})}):(0,i.jsx)("div",{className:"flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border bg-black text-white shadow",children:(0,i.jsx)(L.Z,{className:"h-4 w-4"})})}var T=t(42421),_=t(87592),U=t(40882);let Z=U.fC,I=U.wy,O=U.Fw;function P(e){let{data:s,isLoading:t}=e,[n,a]=(0,d.useState)(!1),r=n?(0,i.jsx)(T.Z,{className:"h-4 w-4"}):(0,i.jsx)(_.Z,{className:"h-4 w-4"});return(0,i.jsx)("div",{className:"border-l-2 border-indigo-400 pl-2",children:(0,i.jsxs)(Z,{open:n,onOpenChange:a,children:[(0,i.jsx)(I,{asChild:!0,children:(0,i.jsxs)(f,{variant:"secondary",className:"space-x-2",children:[t?(0,i.jsx)(j.Z,{className:"h-4 w-4 animate-spin"}):null,(0,i.jsx)("span",{children:n?"Hide events":"Show events"}),r]})}),(0,i.jsx)(O,{asChild:!0,children:(0,i.jsx)("div",{className:"mt-4 text-sm space-y-2",children:s.map((e,s)=>(0,i.jsx)("div",{children:e.title},s))})})]})})}function B(e){let{data:s}=e;return(0,i.jsx)("div",{className:"rounded-md max-w-[200px] shadow-md",children:(0,i.jsx)(b.default,{src:s.url,width:0,height:0,sizes:"100vw",style:{width:"100%",height:"auto"},alt:""})})}var A=t(93080);let M=A.fC,H=A.xz,$=d.forwardRef((e,s)=>{let{className:t,align:n="center",sideOffset:a=4,...r}=e;return(0,i.jsx)(A.VY,{ref:s,align:n,sideOffset:a,className:x("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})});$.displayName=A.VY.displayName;var V=t(20357);let W=e=>{let s=!!V.env.NEXT_PUBLIC_CHAT_API,t="/api/".concat("data","/").concat(e);if(s){let e=new URL(V.env.NEXT_PUBLIC_CHAT_API).origin;return"".concat(e,"/").concat(t)}return t};function J(e){let{timeout:s=2e3}=e,[t,n]=d.useState(!1);return{isCopied:t,copyToClipboard:e=>{var t;(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText)&&e&&navigator.clipboard.writeText(e).then(()=>{n(!0),setTimeout(()=>{n(!1)},s)})}}}var X=t(93241),Y=t(81279),G=t(63957);let K=e=>{let{shouldScaleBackground:s=!0,...t}=e;return(0,i.jsx)(G.d.Root,{shouldScaleBackground:s,...t})};K.displayName="Drawer";let q=G.d.Trigger,Q=G.d.Portal,ee=G.d.Close,es=d.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)(G.d.Overlay,{ref:s,className:x("fixed inset-0 z-50 bg-black/80",t),...n})});es.displayName=G.d.Overlay.displayName;let et=d.forwardRef((e,s)=>{let{className:t,children:n,...a}=e;return(0,i.jsxs)(Q,{children:[(0,i.jsx)(es,{}),(0,i.jsxs)(G.d.Content,{ref:s,className:x("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...a,children:[(0,i.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]})});et.displayName="DrawerContent";let en=e=>{let{className:s,...t}=e;return(0,i.jsx)("div",{className:x("grid gap-1.5 p-4 text-center sm:text-left",s),...t})};en.displayName="DrawerHeader";let ea=d.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)(G.d.Title,{ref:s,className:x("text-lg font-semibold leading-none tracking-tight",t),...n})});ea.displayName=G.d.Title.displayName;let er=d.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)(G.d.Description,{ref:s,className:x("text-sm text-muted-foreground",t),...n})});function el(e){return(0,i.jsxs)(K,{direction:"left",children:[(0,i.jsx)(q,{children:e.trigger}),(0,i.jsxs)(et,{className:"w-3/5 mt-24 h-full max-h-[96%] ",children:[(0,i.jsxs)(en,{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(ea,{children:"PDF Content"}),(0,i.jsxs)(er,{children:["File path:"," ",(0,i.jsx)("a",{className:"hover:text-blue-900",href:e.url,target:"_blank",children:e.path})]})]}),(0,i.jsx)(ee,{asChild:!0,children:(0,i.jsx)(f,{variant:"outline",children:"Close"})})]}),(0,i.jsx)("div",{className:"m-4",children:(0,i.jsx)(X.Z,{children:(0,i.jsx)(Y.Z,{file:{id:e.documentId,url:e.url}})})})]})]})}function ei(e){let{index:s}=e;return(0,i.jsx)("div",{className:"text-xs w-5 h-5 rounded-full bg-gray-100 mb-2 flex items-center justify-center hover:text-white hover:bg-primary hover:cursor-pointer",children:s+1})}function eo(e){let{data:s}=e,t=(0,d.useMemo)(()=>{let e={};return s.nodes.filter(e=>{var s;return(null!==(s=e.score)&&void 0!==s?s:1)>.3}).sort((e,s)=>{var t,n;return(null!==(t=s.score)&&void 0!==t?t:1)-(null!==(n=e.score)&&void 0!==n?n:1)}).forEach(s=>{var t;let n=function(e){if("string"==typeof e.metadata.URL){let s=e.metadata.URL;return{id:e.id,type:0,path:s,url:s}}if("string"==typeof e.metadata.file_path){let s=e.metadata.file_name;return{id:e.id,type:1,path:e.metadata.file_path,url:W(s)}}return{id:e.id,type:2}}(s),a=null!==(t=n.path)&&void 0!==t?t:n.id;e[a]||(e[a]=n)}),Object.values(e)},[s.nodes]);return 0===t.length?null:(0,i.jsxs)("div",{className:"space-x-2 text-sm",children:[(0,i.jsx)("span",{className:"font-semibold",children:"Sources:"}),(0,i.jsx)("div",{className:"inline-flex gap-1 items-center",children:t.map((e,s)=>{var t;return(null===(t=e.path)||void 0===t?void 0:t.endsWith(".pdf"))?(0,i.jsx)(el,{documentId:e.id,url:e.url,path:e.path,trigger:(0,i.jsx)(ei,{index:s})},e.id):(0,i.jsx)("div",{children:(0,i.jsxs)(M,{children:[(0,i.jsx)(H,{children:(0,i.jsx)(ei,{index:s})}),(0,i.jsx)($,{className:"w-[320px]",children:(0,i.jsx)(ed,{nodeInfo:e})})]})},e.id)})})]})}function ed(e){let{nodeInfo:s}=e,{isCopied:t,copyToClipboard:n}=J({timeout:1e3});return 2!==s.type?(0,i.jsxs)("div",{className:"flex items-center my-2",children:[(0,i.jsx)("a",{className:"hover:text-blue-900",href:s.url,target:"_blank",children:(0,i.jsx)("span",{children:s.path})}),(0,i.jsx)(f,{onClick:()=>n(s.path),size:"icon",variant:"ghost",className:"h-12 w-12 shrink-0",children:t?(0,i.jsx)(R.Z,{className:"h-4 w-4"}):(0,i.jsx)(F.Z,{className:"h-4 w-4"})})]}):(0,i.jsx)("p",{children:"Sorry, unknown node type. Please add a new renderer in the NodeInfo component."})}er.displayName=G.d.Description.displayName,(n=r||(r={}))[n.URL=0]="URL",n[n.FILE=1]="FILE",n[n.UNKNOWN=2]="UNKNOWN";let ec={0:{icon:(0,i.jsx)("span",{children:"☀️"}),status:"Clear sky"},1:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF24️"}),status:"Mainly clear"},2:{icon:(0,i.jsx)("span",{children:"☁️"}),status:"Partly cloudy"},3:{icon:(0,i.jsx)("span",{children:"☁️"}),status:"Overcast"},45:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF2B️"}),status:"Fog"},48:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF2B️"}),status:"Depositing rime fog"},51:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Drizzle"},53:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Drizzle"},55:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Drizzle"},56:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Freezing Drizzle"},57:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Freezing Drizzle"},61:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain"},63:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain"},65:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain"},66:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Freezing Rain"},67:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Freezing Rain"},71:{icon:(0,i.jsx)("span",{children:"❄️"}),status:"Snow fall"},73:{icon:(0,i.jsx)("span",{children:"❄️"}),status:"Snow fall"},75:{icon:(0,i.jsx)("span",{children:"❄️"}),status:"Snow fall"},77:{icon:(0,i.jsx)("span",{children:"❄️"}),status:"Snow grains"},80:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain showers"},81:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain showers"},82:{icon:(0,i.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain showers"},85:{icon:(0,i.jsx)("span",{children:"❄️"}),status:"Snow showers"},86:{icon:(0,i.jsx)("span",{children:"❄️"}),status:"Snow showers"},95:{icon:(0,i.jsx)("span",{children:"⛈️"}),status:"Thunderstorm"},96:{icon:(0,i.jsx)("span",{children:"⛈️"}),status:"Thunderstorm"},99:{icon:(0,i.jsx)("span",{children:"⛈️"}),status:"Thunderstorm"}},eu=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long"});function eh(e){let{data:s}=e,t=new Date(s.current.time).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});return(0,i.jsxs)("div",{className:"bg-[#61B9F2] rounded-2xl shadow-xl p-5 space-y-4 text-white w-fit",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"text-xl",children:t}),(0,i.jsxs)("div",{className:"text-5xl font-semibold flex gap-4",children:[(0,i.jsxs)("span",{children:[s.current.temperature_2m," ",s.current_units.temperature_2m]}),ec[s.current.weather_code].icon]})]}),(0,i.jsx)("span",{className:"text-xl",children:ec[s.current.weather_code].status})]}),(0,i.jsx)("div",{className:"gap-2 grid grid-cols-6",children:s.daily.time.map((e,t)=>0===t?null:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,i.jsx)("span",{children:eu(e)}),(0,i.jsx)("div",{className:"text-4xl",children:ec[s.daily.weather_code[t]].icon}),(0,i.jsx)("span",{className:"text-sm",children:ec[s.daily.weather_code[t]].status})]},e))})]})}function em(e){let{data:s}=e;if(!s)return null;let{toolCall:t,toolOutput:n}=s;if(n.isError)return(0,i.jsxs)("div",{className:"border-l-2 border-red-400 pl-2",children:["There was an error when calling the tool ",t.name," with input:"," ",(0,i.jsx)("br",{}),JSON.stringify(t.input)]});if("get_weather_information"===t.name){let e=n.output;return(0,i.jsx)(eh,{data:e})}return null}t(7395);var ex=t(53150),ep=t(60724),ef=t(57439),ej=t(93676),eg=t(37164),ev=t(28040),ew=t(38666);let eN=ev.Z,eb={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},ey=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="ABCDEFGHJKLMNPQRSTUVWXY3456789",n="";for(let s=0;s<e;s++)n+=t.charAt(Math.floor(Math.random()*t.length));return s?n.toLowerCase():n},eC=(0,d.memo)(e=>{let{language:s,value:t}=e,{isCopied:n,copyToClipboard:a}=J({timeout:2e3});return(0,i.jsxs)("div",{className:"codeblock relative w-full bg-zinc-950 font-sans",children:[(0,i.jsxs)("div",{className:"flex w-full items-center justify-between bg-zinc-800 px-6 py-2 pr-4 text-zinc-100",children:[(0,i.jsx)("span",{className:"text-xs lowercase",children:s}),(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,i.jsxs)(f,{variant:"ghost",onClick:()=>{let e=eb[s]||".file",n="file-".concat(ey(3,!0)).concat(e),a=window.prompt("Enter file name",n);if(!a)return;let r=new Blob([t],{type:"text/plain"}),l=URL.createObjectURL(r),i=document.createElement("a");i.download=a,i.href=l,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)},size:"icon",children:[(0,i.jsx)(eg.Z,{}),(0,i.jsx)("span",{className:"sr-only",children:"Download"})]}),(0,i.jsxs)(f,{variant:"ghost",size:"icon",onClick:()=>{n||a(t)},children:[n?(0,i.jsx)(R.Z,{className:"h-4 w-4"}):(0,i.jsx)(F.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Copy code"})]})]})]}),(0,i.jsx)(eN,{language:s,style:ew.RY,PreTag:"div",showLineNumbers:!0,customStyle:{width:"100%",background:"transparent",padding:"1.5rem 1rem",borderRadius:"0.5rem"},codeTagProps:{style:{fontSize:"0.9rem",fontFamily:"var(--font-mono)"}},children:t})]})});eC.displayName="CodeBlock";let eD=(0,d.memo)(ex.D,(e,s)=>e.children===s.children&&e.className===s.className),ek=e=>e.replace(RegExp("\\\\\\[(.*?)\\\\\\]","gs"),(e,s)=>"$$".concat(s,"$$")).replace(RegExp("\\\\\\((.*?)\\\\\\)","gs"),(e,s)=>"$".concat(s,"$"));function eS(e){let{content:s}=e,t=ek(s);return(0,i.jsx)(eD,{className:"prose dark:prose-invert prose-p:leading-relaxed prose-pre:p-0 break-words custom-markdown",remarkPlugins:[ef.Z,ej.Z],rehypePlugins:[ep.Z],components:{p(e){let{children:s}=e;return(0,i.jsx)("p",{className:"mb-2 last:mb-0",children:s})},code(e){let{node:s,inline:t,className:n,children:a,...r}=e;if(a.length){if("▍"==a[0])return(0,i.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"});a[0]=a[0].replace("`▍`","▍")}let l=/language-(\w+)/.exec(n||"");return t?(0,i.jsx)("code",{className:n,...r,children:a}):(0,i.jsx)(eC,{language:l&&l[1]||"",value:String(a).replace(/\n$/,""),...r},Math.random())}},children:t})}function eR(e,s){return e.filter(e=>e.type===s).map(e=>e.data)}function eF(e){let{message:s,isLoading:t}=e,n=s.annotations;if(!(null==n?void 0:n.length))return(0,i.jsx)(eS,{content:s.content});let a=eR(n,l.IMAGE),r=eR(n,l.EVENTS),o=eR(n,l.SOURCES),c=eR(n,l.TOOLS),u=[{order:-3,component:a[0]?(0,i.jsx)(B,{data:a[0]}):null},{order:-2,component:r.length>0?(0,i.jsx)(P,{isLoading:t,data:r}):null},{order:-1,component:c[0]?(0,i.jsx)(em,{data:c[0]}):null},{order:0,component:(0,i.jsx)(eS,{content:s.content})},{order:1,component:o[0]?(0,i.jsx)(eo,{data:o[0]}):null}];return(0,i.jsx)("div",{className:"flex-1 gap-4 flex flex-col",children:u.sort((e,s)=>e.order-s.order).map((e,s)=>(0,i.jsx)(d.Fragment,{children:e.component},s))})}function ez(e){let{chatMessage:s,isLoading:t}=e,{isCopied:n,copyToClipboard:a}=J({timeout:2e3});return(0,i.jsxs)("div",{className:"flex items-start gap-4 pr-5 pt-5",children:[(0,i.jsx)(E,{role:s.role}),(0,i.jsxs)("div",{className:"group flex flex-1 justify-between gap-2",children:[(0,i.jsx)(eF,{message:s,isLoading:t}),(0,i.jsx)(f,{onClick:()=>a(s.content),size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100",children:n?(0,i.jsx)(R.Z,{className:"h-4 w-4"}):(0,i.jsx)(F.Z,{className:"h-4 w-4"})})]})]})}function eL(e){let s=(0,d.useRef)(null),t=e.messages.length,n=e.messages[t-1],a=()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},r=t>0&&(null==n?void 0:n.role)!=="user",l=e.reload&&!e.isLoading&&r,o=e.stop&&e.isLoading,c=e.isLoading&&!r;return(0,d.useEffect)(()=>{a()},[t,n]),(0,i.jsxs)("div",{className:"w-full h-full rounded-xl bg-white p-4 shadow-xl border overflow-auto",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-5 divide-y pb-4",ref:s,children:[e.messages.map(s=>(0,i.jsx)(ez,{chatMessage:s,isLoading:e.isLoading},s.id)),c&&(0,i.jsx)("div",{className:"flex justify-center items-center pt-10",children:(0,i.jsx)(j.Z,{className:"h-4 w-4 animate-spin"})})]}),(0,i.jsx)("div",{className:"flex justify-end py-4",children:(0,i.jsx)(S,{reload:e.reload,stop:e.stop,showReload:l,showStop:o})})]})}(a=l||(l={})).IMAGE="image",a.SOURCES="sources",a.EVENTS="events",a.TOOLS="tools";var eE=t(20357);function eT(e){let{layout:s}=e,{messages:t,input:n,isLoading:a,handleSubmit:r,handleInputChange:l,reload:d,stop:c}=(0,o.RJ)({api:eE.env.NEXT_PUBLIC_CHAT_API,headers:{"Content-Type":"application/json"},onError:e=>{alert(JSON.parse(e.message).detail)}});return(0,i.jsxs)("div",{className:"flex flex-col space-y-4 justify-between w-full pb-4 ".concat("fit"===s?"h-full p-2":"max-w-5xl h-[50vh]"),children:[(0,i.jsx)(eL,{messages:t,isLoading:a,reload:d,stop:c}),(0,i.jsx)(C,{input:n,handleSubmit:r,handleInputChange:l,isLoading:a,multiModal:!0})]})}}}]);