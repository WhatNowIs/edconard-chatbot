(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{74081:function(){},1696:function(){},62811:function(){},65665:function(){},68665:function(){},96825:function(e,s,t){"use strict";t.d(s,{default:function(){return eI}});var a,n,l,r,i,o,d=t(57437),c=t(24266),u=t(2265),m=t(71538),h=t(12218),p=t(44839),x=t(96164);function f(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,x.m6)((0,p.W)(s))}let g=(0,h.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=u.forwardRef((e,s)=>{let{className:t,variant:a,size:n,asChild:l=!1,...r}=e,i=l?m.g7:"button";return(0,d.jsx)(i,{className:f(g({variant:a,size:n,className:t})),ref:s,...r})});j.displayName="Button";var v=t(74109),w=t(42365);function b(e){var s;let{config:t,onFileUpload:a,onFileError:n}=e,[l,r]=(0,u.useState)(!1),i=(null==t?void 0:t.inputId)||"fileInput",o=(null==t?void 0:t.fileSizeLimit)||52428800,c=null==t?void 0:t.allowedExtensions,m=null!==(s=null==t?void 0:t.checkExtension)&&void 0!==s?s:e=>c&&!c.includes(e)?"Invalid file type. Please select a file with one of these formats: ".concat(c.join(",")):null,h=e=>e.size>o,p=()=>{document.getElementById(i).value=""},x=async e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&(r(!0),await j(t),p(),r(!1))},j=async e=>{let s=n||window.alert,t=m(e.name.split(".").pop()||"");return t?s(t):h(e)?s("File size exceeded. Limit is ".concat(o/1024/1024," MB")):void await a(e)};return(0,d.jsxs)("div",{className:"self-stretch",children:[(0,d.jsx)("input",{type:"file",id:i,style:{display:"none"},onChange:x,accept:null==c?void 0:c.join(","),disabled:(null==t?void 0:t.disabled)||l}),(0,d.jsx)("label",{htmlFor:i,className:f(g({variant:"secondary",size:"icon"}),"cursor-pointer",l&&"opacity-50"),children:l?(0,d.jsx)(v.Z,{className:"h-4 w-4 animate-spin"}):(0,d.jsx)(w.Z,{className:"-rotate-45 w-4 h-4"})})]})}let y=u.forwardRef((e,s)=>{let{className:t,type:a,...n}=e;return(0,d.jsx)("input",{type:a,className:f("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});y.displayName="Input";var N=t(59738),C=t(66648);function D(e){let{url:s,onRemove:t}=e;return(0,d.jsxs)("div",{className:"relative w-20 h-20 group",children:[(0,d.jsx)(C.default,{src:s,alt:"Uploaded image",fill:!0,className:"object-cover w-full h-full rounded-xl hover:brightness-75"}),(0,d.jsx)("div",{className:f("absolute -top-2 -right-2 w-6 h-6 z-10 bg-gray-500 text-white rounded-full hidden group-hover:block"),children:(0,d.jsx)(N.Z,{className:"w-6 h-6 bg-gray-500 text-white rounded-full",onClick:t})})]})}function k(e){let[s,t]=(0,u.useState)(null),a=async e=>{t(await new Promise((s,t)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>s(a.result),a.onerror=e=>t(e)}))},n=async s=>{var t,n;try{if(e.multiModal&&s.type.startsWith("image/"))return await a(s);null===(t=e.onFileUpload)||void 0===t||t.call(e,s)}catch(s){null===(n=e.onFileError)||void 0===n||n.call(e,s.message)}};return(0,d.jsxs)("form",{onSubmit:a=>{if(s){e.handleSubmit(a,{data:{imageUrl:s}}),t(null);return}e.handleSubmit(a)},className:"rounded-xl bg-white p-4 shadow-xl space-y-4",children:[s&&(0,d.jsx)(D,{url:s,onRemove:()=>t(null)}),(0,d.jsxs)("div",{className:"flex w-full items-start justify-between gap-4 ",children:[(0,d.jsx)(y,{autoFocus:!0,name:"message",placeholder:"Type a message",className:"flex-1",value:e.input,onChange:e.handleInputChange}),(0,d.jsx)(b,{onFileUpload:n,onFileError:e.onFileError}),(0,d.jsx)(j,{type:"submit",disabled:e.isLoading,children:"Send message"})]})]})}var F=t(70459),S=t(66706);function R(e){return(0,d.jsxs)("div",{className:"space-x-4",children:[e.showStop&&(0,d.jsxs)(j,{variant:"outline",size:"sm",onClick:e.stop,children:[(0,d.jsx)(F.Z,{className:"mr-2 h-4 w-4"}),"Stop generating"]}),e.showReload&&(0,d.jsxs)(j,{variant:"outline",size:"sm",onClick:e.reload,children:[(0,d.jsx)(S.Z,{className:"mr-2 h-4 w-4"}),"Regenerate"]})]})}var z=t(22468),_=t(6884),L=t(71145),E=t(40475);function T(e){let{role:s}=e;return"user"===s?(0,d.jsx)("div",{className:"flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border bg-background shadow",children:(0,d.jsx)(L.Z,{className:"h-4 w-4"})}):(0,d.jsx)("div",{className:"flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border bg-black text-white shadow",children:(0,d.jsx)(E.Z,{className:"h-4 w-4"})})}var U=t(42421),Z=t(87592),I=t(40882);let P=I.fC,O=I.wy,B=I.Fw;function M(e){let{data:s,isLoading:t}=e,[a,n]=(0,u.useState)(!1),l=a?(0,d.jsx)(U.Z,{className:"h-4 w-4"}):(0,d.jsx)(Z.Z,{className:"h-4 w-4"});return(0,d.jsx)("div",{className:"border-l-2 border-indigo-400 pl-2",children:(0,d.jsxs)(P,{open:a,onOpenChange:n,children:[(0,d.jsx)(O,{asChild:!0,children:(0,d.jsxs)(j,{variant:"secondary",className:"space-x-2",children:[t?(0,d.jsx)(v.Z,{className:"h-4 w-4 animate-spin"}):null,(0,d.jsx)("span",{children:a?"Hide events":"Show events"}),l]})}),(0,d.jsx)(B,{asChild:!0,children:(0,d.jsx)("div",{className:"mt-4 text-sm space-y-2",children:s.map((e,s)=>(0,d.jsx)("div",{children:e.title},s))})})]})})}function A(e){let{data:s}=e;return(0,d.jsx)("div",{className:"rounded-md max-w-[200px] shadow-md",children:(0,d.jsx)(C.default,{src:s.url,width:0,height:0,sizes:"100vw",style:{width:"100%",height:"auto"},alt:""})})}var H=t(93080);let $=H.fC,V=H.xz,W=u.forwardRef((e,s)=>{let{className:t,align:a="center",sideOffset:n=4,...l}=e;return(0,d.jsx)(H.VY,{ref:s,align:a,sideOffset:n,className:f("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});W.displayName=H.VY.displayName;var J=t(20357);let X=e=>{let s=!!J.env.NEXT_PUBLIC_CHAT_API,t="/api/".concat("data","/").concat(e);if(s){let e=new URL(J.env.NEXT_PUBLIC_CHAT_API).origin;return"".concat(e,"/").concat(t)}return t};function Y(e){let{timeout:s=2e3}=e,[t,a]=u.useState(!1);return{isCopied:t,copyToClipboard:e=>{var t;(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText)&&e&&navigator.clipboard.writeText(e).then(()=>{a(!0),setTimeout(()=>{a(!1)},s)})}}}var G=t(93241),K=t(3),q=t(63957);let Q=e=>{let{shouldScaleBackground:s=!0,...t}=e;return(0,d.jsx)(q.d.Root,{shouldScaleBackground:s,...t})};Q.displayName="Drawer";let ee=q.d.Trigger,es=q.d.Portal,et=q.d.Close,ea=u.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,d.jsx)(q.d.Overlay,{ref:s,className:f("fixed inset-0 z-50 bg-black/80",t),...a})});ea.displayName=q.d.Overlay.displayName;let en=u.forwardRef((e,s)=>{let{className:t,children:a,...n}=e;return(0,d.jsxs)(es,{children:[(0,d.jsx)(ea,{}),(0,d.jsxs)(q.d.Content,{ref:s,className:f("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...n,children:[(0,d.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),a]})]})});en.displayName="DrawerContent";let el=e=>{let{className:s,...t}=e;return(0,d.jsx)("div",{className:f("grid gap-1.5 p-4 text-center sm:text-left",s),...t})};el.displayName="DrawerHeader";let er=u.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,d.jsx)(q.d.Title,{ref:s,className:f("text-lg font-semibold leading-none tracking-tight",t),...a})});er.displayName=q.d.Title.displayName;let ei=u.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,d.jsx)(q.d.Description,{ref:s,className:f("text-sm text-muted-foreground",t),...a})});function eo(e){return(0,d.jsxs)(Q,{direction:"left",children:[(0,d.jsx)(ee,{children:e.trigger}),(0,d.jsxs)(en,{className:"w-3/5 mt-24 h-full max-h-[96%] ",children:[(0,d.jsxs)(el,{className:"flex justify-between",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(er,{children:"PDF Content Modified"}),(0,d.jsxs)(ei,{children:["File path:"," ",(0,d.jsx)("a",{className:"hover:text-blue-900",href:e.url,target:"_blank",children:e.path})]})]}),(0,d.jsx)(et,{asChild:!0,children:(0,d.jsx)(j,{variant:"outline",children:"Close"})})]}),(0,d.jsx)("div",{className:"m-4",children:(0,d.jsx)(G.Z,{children:(0,d.jsx)(K.Z,{file:{id:e.documentId,url:e.url}})})})]})]})}ei.displayName=q.d.Description.displayName;let ed=(0,u.createContext)(void 0),ec=()=>{let e=(0,u.useContext)(ed);if(void 0===e)throw Error("usePDF must be used within a PDFProvider");return e};function eu(e){let{index:s}=e;return(0,d.jsx)("div",{className:"text-xs w-5 h-5 rounded-full bg-gray-100 mb-2 flex items-center justify-center hover:text-white hover:bg-primary hover:cursor-pointer",children:s+1})}function em(e){let{data:s}=e,t=(0,u.useMemo)(()=>{let e={};return s.nodes.filter(e=>{var s;return(null!==(s=e.score)&&void 0!==s?s:1)>.3}).sort((e,s)=>{var t,a;return(null!==(t=s.score)&&void 0!==t?t:1)-(null!==(a=e.score)&&void 0!==a?a:1)}).forEach(s=>{var t;let a=function(e){var s,t,a;if("string"==typeof e.metadata.URL){let s=e.metadata.URL;return{id:e.id,type:0,path:s,url:s,text:e.text,page_number:null===(t=e.metadata)||void 0===t?void 0:t.page_label}}if("string"==typeof e.metadata.file_path){let s=e.metadata.file_name;return{id:e.id,type:1,path:e.metadata.file_path,url:X(s),text:e.text,page_number:null===(a=e.metadata)||void 0===a?void 0:a.page_label}}return{id:e.id,type:2,text:e.text,page_number:null===(s=e.metadata)||void 0===s?void 0:s.page_label}}(s),n=null!==(t=a.path)&&void 0!==t?t:a.id;e[n]||(e[n]=a)}),Object.values(e)},[s.nodes]);return 0===t.length?null:(0,d.jsxs)("div",{className:"space-x-2 text-sm",children:[(0,d.jsx)("span",{className:"font-semibold",children:"Sources:"}),(0,d.jsx)("div",{className:"inline-flex gap-1 items-center",children:t.map((e,s)=>{var t;return(null===(t=e.path)||void 0===t?void 0:t.endsWith(".pdf"))?(0,d.jsx)(eo,{documentId:e.id,url:e.url,path:e.path,trigger:(0,d.jsx)(eu,{index:s})},e.id):(0,d.jsx)("div",{children:(0,d.jsxs)($,{children:[(0,d.jsx)(V,{children:(0,d.jsx)(eu,{index:s})}),(0,d.jsx)(W,{className:"w-[320px]",children:(0,d.jsx)(eh,{nodeInfo:e})})]})},e.id)})})]})}function eh(e){let{nodeInfo:s}=e,{setPdfFocusState:t}=ec(),a=(e,s,a)=>{t({documentId:e,pageNumber:s,citation:a})},{isCopied:n,copyToClipboard:l}=Y({timeout:1e3});return 2!==s.type?(0,d.jsxs)("div",{className:"flex items-center my-2",children:[(0,d.jsx)("a",{className:"hover:text-blue-900",href:s.url,target:"_blank",children:(0,d.jsx)("span",{children:s.path})}),(0,d.jsx)(j,{onClick:()=>{l(s.path),a(s.id,s.page_number,{documentId:s.id,snippet:s.text,pageNumber:s.page_number,color:r.teal,ticker:""})},size:"icon",variant:"ghost",className:"h-12 w-12 shrink-0",children:n?(0,d.jsx)(z.Z,{className:"h-4 w-4"}):(0,d.jsx)(_.Z,{className:"h-4 w-4"})})]}):(0,d.jsx)("p",{children:"Sorry, unknown node type. Please add a new renderer in the NodeInfo component."})}(a=r||(r={})).purple="llama-purple",a.magenta="llama-magenta",a.red="llama-red",a.orange="llama-orange",a.yellow="llama-yellow",a.lime="llama-lime",a.teal="llama-teal",a.cyan="llama-cyan",a.blue="llama-blue",a.indigo="llama-indigo",(n=i||(i={}))[n.URL=0]="URL",n[n.FILE=1]="FILE",n[n.UNKNOWN=2]="UNKNOWN";let ep={0:{icon:(0,d.jsx)("span",{children:"☀️"}),status:"Clear sky"},1:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF24️"}),status:"Mainly clear"},2:{icon:(0,d.jsx)("span",{children:"☁️"}),status:"Partly cloudy"},3:{icon:(0,d.jsx)("span",{children:"☁️"}),status:"Overcast"},45:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF2B️"}),status:"Fog"},48:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF2B️"}),status:"Depositing rime fog"},51:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Drizzle"},53:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Drizzle"},55:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Drizzle"},56:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Freezing Drizzle"},57:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Freezing Drizzle"},61:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain"},63:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain"},65:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain"},66:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Freezing Rain"},67:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Freezing Rain"},71:{icon:(0,d.jsx)("span",{children:"❄️"}),status:"Snow fall"},73:{icon:(0,d.jsx)("span",{children:"❄️"}),status:"Snow fall"},75:{icon:(0,d.jsx)("span",{children:"❄️"}),status:"Snow fall"},77:{icon:(0,d.jsx)("span",{children:"❄️"}),status:"Snow grains"},80:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain showers"},81:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain showers"},82:{icon:(0,d.jsx)("span",{children:"\uD83C\uDF27️"}),status:"Rain showers"},85:{icon:(0,d.jsx)("span",{children:"❄️"}),status:"Snow showers"},86:{icon:(0,d.jsx)("span",{children:"❄️"}),status:"Snow showers"},95:{icon:(0,d.jsx)("span",{children:"⛈️"}),status:"Thunderstorm"},96:{icon:(0,d.jsx)("span",{children:"⛈️"}),status:"Thunderstorm"},99:{icon:(0,d.jsx)("span",{children:"⛈️"}),status:"Thunderstorm"}},ex=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long"});function ef(e){let{data:s}=e,t=new Date(s.current.time).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});return(0,d.jsxs)("div",{className:"bg-[#61B9F2] rounded-2xl shadow-xl p-5 space-y-4 text-white w-fit",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"text-xl",children:t}),(0,d.jsxs)("div",{className:"text-5xl font-semibold flex gap-4",children:[(0,d.jsxs)("span",{children:[s.current.temperature_2m," ",s.current_units.temperature_2m]}),ep[s.current.weather_code].icon]})]}),(0,d.jsx)("span",{className:"text-xl",children:ep[s.current.weather_code].status})]}),(0,d.jsx)("div",{className:"gap-2 grid grid-cols-6",children:s.daily.time.map((e,t)=>0===t?null:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,d.jsx)("span",{children:ex(e)}),(0,d.jsx)("div",{className:"text-4xl",children:ep[s.daily.weather_code[t]].icon}),(0,d.jsx)("span",{className:"text-sm",children:ep[s.daily.weather_code[t]].status})]},e))})]})}function eg(e){let{data:s}=e;if(!s)return null;let{toolCall:t,toolOutput:a}=s;if(a.isError)return(0,d.jsxs)("div",{className:"border-l-2 border-red-400 pl-2",children:["There was an error when calling the tool ",t.name," with input:"," ",(0,d.jsx)("br",{}),JSON.stringify(t.input)]});if("get_weather_information"===t.name){let e=a.output;return(0,d.jsx)(ef,{data:e})}return null}t(7395);var ej=t(53150),ev=t(60724),ew=t(57439),eb=t(93676),ey=t(37164),eN=t(28040),eC=t(38666);let eD=eN.Z,ek={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},eF=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="ABCDEFGHJKLMNPQRSTUVWXY3456789",a="";for(let s=0;s<e;s++)a+=t.charAt(Math.floor(Math.random()*t.length));return s?a.toLowerCase():a},eS=(0,u.memo)(e=>{let{language:s,value:t}=e,{isCopied:a,copyToClipboard:n}=Y({timeout:2e3});return(0,d.jsxs)("div",{className:"codeblock relative w-full bg-zinc-950 font-sans",children:[(0,d.jsxs)("div",{className:"flex w-full items-center justify-between bg-zinc-800 px-6 py-2 pr-4 text-zinc-100",children:[(0,d.jsx)("span",{className:"text-xs lowercase",children:s}),(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsxs)(j,{variant:"ghost",onClick:()=>{let e=ek[s]||".file",a="file-".concat(eF(3,!0)).concat(e),n=window.prompt("Enter file name",a);if(!n)return;let l=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(l),i=document.createElement("a");i.download=n,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},size:"icon",children:[(0,d.jsx)(ey.Z,{}),(0,d.jsx)("span",{className:"sr-only",children:"Download"})]}),(0,d.jsxs)(j,{variant:"ghost",size:"icon",onClick:()=>{a||n(t)},children:[a?(0,d.jsx)(z.Z,{className:"h-4 w-4"}):(0,d.jsx)(_.Z,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Copy code"})]})]})]}),(0,d.jsx)(eD,{language:s,style:eC.RY,PreTag:"div",showLineNumbers:!0,customStyle:{width:"100%",background:"transparent",padding:"1.5rem 1rem",borderRadius:"0.5rem"},codeTagProps:{style:{fontSize:"0.9rem",fontFamily:"var(--font-mono)"}},children:t})]})});eS.displayName="CodeBlock";let eR=(0,u.memo)(ej.D,(e,s)=>e.children===s.children&&e.className===s.className),ez=e=>e.replace(RegExp("\\\\\\[(.*?)\\\\\\]","gs"),(e,s)=>"$$".concat(s,"$$")).replace(RegExp("\\\\\\((.*?)\\\\\\)","gs"),(e,s)=>"$".concat(s,"$"));function e_(e){let{content:s}=e,t=ez(s);return(0,d.jsx)(eR,{className:"prose dark:prose-invert prose-p:leading-relaxed prose-pre:p-0 break-words custom-markdown",remarkPlugins:[ew.Z,eb.Z],rehypePlugins:[ev.Z],components:{p(e){let{children:s}=e;return(0,d.jsx)("p",{className:"mb-2 last:mb-0",children:s})},code(e){let{node:s,inline:t,className:a,children:n,...l}=e;if(n.length){if("▍"==n[0])return(0,d.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"});n[0]=n[0].replace("`▍`","▍")}let r=/language-(\w+)/.exec(a||"");return t?(0,d.jsx)("code",{className:a,...l,children:n}):(0,d.jsx)(eS,{language:r&&r[1]||"",value:String(n).replace(/\n$/,""),...l},Math.random())}},children:t})}function eL(e,s){return e.filter(e=>e.type===s).map(e=>e.data)}function eE(e){let{message:s,isLoading:t}=e,a=s.annotations;if(!(null==a?void 0:a.length))return(0,d.jsx)(e_,{content:s.content});let n=eL(a,o.IMAGE),l=eL(a,o.EVENTS),r=eL(a,o.SOURCES),i=eL(a,o.TOOLS),c=[{order:-3,component:n[0]?(0,d.jsx)(A,{data:n[0]}):null},{order:-2,component:l.length>0?(0,d.jsx)(M,{isLoading:t,data:l}):null},{order:-1,component:i[0]?(0,d.jsx)(eg,{data:i[0]}):null},{order:0,component:(0,d.jsx)(e_,{content:s.content})},{order:1,component:r[0]?(0,d.jsx)(em,{data:r[0]}):null}];return(0,d.jsx)("div",{className:"flex-1 gap-4 flex flex-col",children:c.sort((e,s)=>e.order-s.order).map((e,s)=>(0,d.jsx)(u.Fragment,{children:e.component},s))})}function eT(e){let{chatMessage:s,isLoading:t}=e,{isCopied:a,copyToClipboard:n}=Y({timeout:2e3});return(0,d.jsxs)("div",{className:"flex items-start gap-4 pr-5 pt-5",children:[(0,d.jsx)(T,{role:s.role}),(0,d.jsxs)("div",{className:"group flex flex-1 justify-between gap-2",children:[(0,d.jsx)(eE,{message:s,isLoading:t}),(0,d.jsx)(j,{onClick:()=>n(s.content),size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100",children:a?(0,d.jsx)(z.Z,{className:"h-4 w-4"}):(0,d.jsx)(_.Z,{className:"h-4 w-4"})})]})]})}function eU(e){let s=(0,u.useRef)(null),t=e.messages.length,a=e.messages[t-1],n=()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},l=t>0&&(null==a?void 0:a.role)!=="user",r=e.reload&&!e.isLoading&&l,i=e.stop&&e.isLoading,o=e.isLoading&&!l;return(0,u.useEffect)(()=>{n()},[t,a]),(0,d.jsxs)("div",{className:"w-full h-full rounded-xl bg-white p-4 shadow-xl border overflow-auto",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-5 divide-y pb-4",ref:s,children:[e.messages.map(s=>(0,d.jsx)(eT,{chatMessage:s,isLoading:e.isLoading},s.id)),o&&(0,d.jsx)("div",{className:"flex justify-center items-center pt-10",children:(0,d.jsx)(v.Z,{className:"h-4 w-4 animate-spin"})})]}),(0,d.jsx)("div",{className:"flex justify-end py-4",children:(0,d.jsx)(R,{reload:e.reload,stop:e.stop,showReload:r,showStop:i})})]})}(l=o||(o={})).IMAGE="image",l.SOURCES="sources",l.EVENTS="events",l.TOOLS="tools";var eZ=t(20357);function eI(e){let{layout:s}=e,{messages:t,input:a,isLoading:n,handleSubmit:l,handleInputChange:r,reload:i,stop:o}=(0,c.RJ)({api:eZ.env.NEXT_PUBLIC_CHAT_API,headers:{"Content-Type":"application/json"},onError:e=>{alert(JSON.parse(e.message).detail)}});return(0,d.jsxs)("div",{className:"flex flex-col space-y-4 justify-between w-full pb-4 ".concat("fit"===s?"h-full p-2":"max-w-5xl h-[50vh]"),children:[(0,d.jsx)(eU,{messages:t,isLoading:n,reload:i,stop:o}),(0,d.jsx)(k,{input:a,handleSubmit:l,handleInputChange:r,isLoading:n,multiModal:!0})]})}}}]);